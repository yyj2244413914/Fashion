<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>商品详情页面</title>
    <script type="text/javascript" src="js/hotAdvise.js"></script>
    <link href="css/shopshow.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="js/goodsOperator.js"></script>
    <style type="text/css">
        *{
            margin:0;padding:0;
        }
        body{
            font-size:12px;
            font-family:microsoft yahei;
        }
        .clear{
            clear:both;
        }
        .top_bg{
            width:100%;
            height:28px;
            background-color:antiquewhite;
            line-height:28px;
        }
        .top_content{
            width:1200px;
            margin:0 auto;
        }
        .floatl{
            float:left;
        }
        .floatr{
            float:right;
        }
        .xl{
            display:inline-block;
        }
        .orange{
            color:#f60;
            font-weight:700;
        }
        .margin45{
            margin-top:4px;
            margin-right:5px;
        }
        .logo{
            width:1200px;
            margin:5px auto;
        }
        .nav_bg{
            width:100%;
            height:40px;
            background-color:red;
        }
        ul,li{
            list-style:none;
        }
        .nav_content{
            width:1200px;
            height:40px;
            line-height:40px;
            margin:0 auto;
        }
        .nav{
            width:100%;
            float:left;
            margin-left:200px;
        }
        .nav li{
            font-size:16px;
            font-weight:700;
            color:#fff;
            float:left;
            width:80px;
            text-align:center;
            margin-right:15px;
        }
        .main{width:1200px;margin:10px auto;height:900px;}
        .menu{ width:220px;float:left;border:1px solid #e5e4e1;}
        .menu li{width:220px;float:left;border:1px solid #e5e4e1;height:33px;
            line-height:33px;background-color: #fafafa;font-size:14px;text-align:left;}
        .menu li .title{width:100%;height:33px;background-color:#e5e5e4e1;
            font-size:15px;text-align:left;line-height:33px;display:inline-block;}
        .middle{width:690px;float:left;}
        .pic_title{background-color:#e0961f;font-size:20px;line-height: 40px;
            color:#fff;margin:0 10px 10px;float:left;width:680px;text-indent: 20px;}
        .pic_list{float:left;}
        .pic_list dl{float:left;width:152px;margin:0 10px 10px;}
        .price{color:red;font-size: 15px;font-weight: 700;float:left;}
        .font12{font-size: 12px;color:#6a6665;float:right;}
        .pic_list dl dd{float:left;}
        .pic_list dl img{border:1px solid #ccc;padding:5px;margin-bottom: 10px;}
        .pic_list2{float:left;}
        .pic_list2 li{width:163px;float:left;margin:5px 4px;border:1px solid #ccc;}
        .pic_list2 dl{float:left;width:152px;margin:0 10px 10px;}
        .pic_list2 dl dd{float:left;}
        .pic_list2 dl img{border:1px solid #ccc;padding:5px;margin-bottom:10px;}
        .red_dot{background:url(images/red_dot.gif)no-repeat;width:8px;height:8px;display:inline-block;margin:0 10px;}
        .right_arrow{background:url(images/arrow_r.jpg)no-repeat;
            width:20px;height:20px;float:right;}
        .right_nav{width:280px;border:ipx solid #eee;float:right;}
        .notice_title{background-color: #ccc;line-height: 40px;font-size: 16px;text-align: left;text-indent: 20px;}
        .pic_list3 li{width:83px;float:left;margin:5px;}
        .pic_list3 li img{border:1px solid #ccc;}
        .price2{color:red;text-align: center;font-weight: 700;}
        .black{color:black;text-decoration:none;}
        a.white{
            color:#fff;
            text-decoration:none;
        }
        a.white:hover{
            color:#ff0;
            text-decoration:none;
        }
        .nav_active{
            height:40px;
            background-color:#b12121;
        }
        .footer{
            width:100%;
            height:300px;
            background-color:rgb(242, 239, 239);
        }
        .foot_pic li{
            float:left;
            width:210px;
            text-align:center;
        }
        .foot_pic{
            width:1200px;
            margin:0 auto;
        }
        .foot_title{
            background-color:#6a6665;
            width:100%;
            height:40px;
            padding-top:8px;
        }
        .foot_list>li{
            float:left;
            width:170px;
        }
        .foot_list{
            width:1100px;
            margin:0 auto;
            padding-top:20px;
        }
        .foot_list li ul{
            padding-left:10px;
        }
        .line1{
            background:url(images/line1.jpg) no-repeat;
            width:20px;
            height:100px;
            display:inline-block;
        }
        .red_p{
            width:35px;
            height:31px;
            display:block;
        }
        .foot_line{
            border-bottom: 1px solid #111 ;
            margin-top: 10px;
            font-size:14px;
        }
        .font16{
            font-size:16px;
            font-weight:700;
        }


        .left_pic{margin-left: 10px;float:left;}
        .small_piclist li img{width:70px;height:70px;border:1px solid #ccc;}
        .small_piclist li{float:left;margin-right: 10px;}
        .right_pic h1{font-size: 16px;}
        .tab li{width:90px;float:left;font-size: 14px;text-align: center;}
        .tab{border:1px solid #ccc;margin:10px;height:35px;line-height: 35px;}
        .tab_active{border-top:red 2px solid;width:100px;font-weight: 700;
            background-color: #f2f2f2;height:33px;border-left: 1px solid #ccc;border-right: 1px solid #ccc;}
        .none{display:none;}
        .particular li{float:left;width:206px;height:24px;line-height:24px;text-indent: 5px;margin-right: 20px;display:inline;}

        /* 放大镜样式 */
        .magnifier-container {
            position: relative;
            display: inline-block;
            cursor: zoom-in;
        }
        
        .magnifier-container:hover {
            cursor: zoom-in;
        }
        
        .magnifier-lens {
            position: absolute;
            border: 2px solid #fff;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            display: none;
            pointer-events: none;
            z-index: 1000;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            width: 100px;
            height: 100px;
        }
        
        .magnifier-view {
            position: fixed;
            border: 3px solid #fff;
            border-radius: 50%;
            background: #fff;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
            display: none;
            z-index: 1001;
            overflow: hidden;
            pointer-events: none;
            width: 200px;
            height: 200px;
        }
        
        .magnifier-view img {
            position: absolute;
            top: 0;
            left: 0;
            max-width: none;
            max-height: none;
        }
        
        /* 商品详情图片间距 */
        .tab_content1 section .magnifier-container {
            margin: 10px;
            display: inline-block;
        }
        
        .tab_content1 section .magnifier-container img {
            max-width: 100%;
            height: auto;
        }
        
        /* 菜单折叠功能样式 */
        .menu .menu-category {
            cursor: pointer;
            position: relative;
            border: 1px solid #e5e4e1;
            margin-bottom: 1px;
        }
        
        .menu .menu-category .title {
            cursor: pointer;
            user-select: none;
            position: relative;
            width: 100%;
            height: 33px;
            background-color: #e5e5e5;
            font-size: 15px;
            text-align: left;
            line-height: 33px;
            display: block;
            padding-left: 20px;
            box-sizing: border-box;
        }
        
        .menu .menu-category .title::after {
            content: '▼';
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 12px;
            transition: transform 0.3s ease;
            color: #666;
        }
        
        .menu .menu-category.collapsed .title::after {
            transform: translateY(-50%) rotate(-90deg);
        }
        
        .menu .menu-subitems {
            overflow: hidden;
            transition: max-height 0.3s ease;
            max-height: 200px;
        }
        
        .menu .menu-category.collapsed .menu-subitems {
            max-height: 0;
        }
        
        .menu .menu-category .menu-subitems li {
            border-top: 1px solid #f0f0f0;
            width: 220px;
            float: left;
            border: 1px solid #e5e4e1;
            height: 33px;
            line-height: 33px;
            background-color: #fafafa;
            font-size: 14px;
            text-align: left;
        }
        
        .menu .menu-category:hover {
            background-color: #f5f5f5;
        }
        
        .menu .menu-category .title:hover {
            background-color: #e8e8e8;
        }
        
        /* 确保控制按钮显示 */
        .menu .menu-controls {
            display: block !important;
            padding: 10px !important;
            background: #f8f8f8 !important;
            border-bottom: 1px solid #e5e4e1 !important;
        }
        
        .menu .menu-controls button {
            margin-right: 10px !important;
            padding: 5px 10px !important;
            border: none !important;
            border-radius: 3px !important;
            cursor: pointer !important;
            font-size: 12px !important;
        }

    </style>
    <script type="text/javascript">
        var images=["dress1.jpg","dress2.jpg","dress3.jpg","dress4.jpg"];
        var content=["xxxxxxx","xxxxxxx","xxxxxxx","xxxxxxx"];
        for(var i in images){
            var liInfo="<li><img src='images/shopshow/"+images[i]+"'/><p>"+content[i]+"</p></li>";
            var pic_active=document.getElementById("pic_active");
            console.log(pic_active);
         }
    </script>
</head>
<body>
    <!-- 顶部区域 start-->
     <div class="top_bg">
        <div class="top_content">
            <div class="floatl">
                    <img src="images/star.jpg"><span>收藏 | 欢迎使用!</span>
                    <a href="#" class="orange">[请登录]</a>
                    <a href="#" class="orange">[免费注册]</a>
            </div>
            <div class="floatr">
                客户服务<img src="images/arrow.gif">&nbsp;网站导航<img src="images/arrow.gif">
                <div class="xl">
                    <div class="droparrow">
                        <span class="margin45">
                            <img src="images/shoppingcart.png">
                        </span>
                            我的购物车<span class="orange">0</span>件<img src="images/arrow.gif">

                    </div>
                </div>
            </div>
        </div>
     </div>
    <!-- 顶部区域end -->

    <!-- logo区域 start-->
       <div class="logo">
        <a href="shoppingindex.html"><img src="images/logo.jpg"></a>
        <img src="images/banner.jpg">
       </div>
        <!-- logo区域end -->

        <!-- 菜单导航start -->

         <div class="nav_bg">
            <div class="nav_content">
                <ul class="nav">
                    <li ><a href="shoppingindex.html" class="white" >首页</a></li>
                    <li class="nav_active"><a href="shoppingshoe.html" class="white">最新上架</a></li>
                    <li><a href="#" class="white">品牌活动</a></li>
                    <li><a href="#" class="white">原厂直供</a></li>
                    <li><a href="#" class="white">团购</a></li>
                    <li><a href="#" class="white">限时抢购</a></li>
                    <li><a href="#" class="white">促销打折</a></li>
                </ul>
            </div>
         </div>
        <!-- 菜单导航end -->

         <!-- 内容区start -->
          <div class="main">
            <div class="menu">
                <div class="menu-controls" style="padding: 10px; background: #f8f8f8; border-bottom: 1px solid #e5e4e1; display: block !important; font-size: 18px; font-weight: bold; color: #333; text-align: center;">菜单</div>
                <div class="menu-category" onclick="toggleMenu(this)">
                    <div class="title">女装</div>
                    <div class="menu-subitems">
                        <li>
                            <span class="red_dot"></span>
                            <a href="#" class="black">上衣</a>
                            <span class="right_arrow"></span>
                        </li>
                        <li>
                            <span class="red_dot"></span>
                            <a href="#" class="black">下装</a>
                            <span class="right_arrow"></span>
                        </li>
                        <li>
                            <span class="red_dot"></span>
                            <a href="#" class="black">连衣裙</a>
                            <span class="right_arrow"></span>
                        </li>
                        <li>
                            <span class="red_dot"></span>
                            <a href="#" class="black">包包</a>
                            <span class="right_arrow"></span>
                        </li>
                    </div>
                </div>
                
                <div class="menu-category" onclick="toggleMenu(this)">
                    <div class="title">男装</div>
                    <div class="menu-subitems">
                        <li>
                            <span class="red_dot"></span>
                            <a href="#" class="black">T恤</a>
                            <span class="right_arrow"></span>
                        </li>
                        <li>
                            <span class="red_dot"></span>
                            <a href="#" class="black">西装</a>
                            <span class="right_arrow"></span>
                        </li>
                        <li>
                            <span class="red_dot"></span>
                            <a href="#" class="black">衬衫</a>
                            <span class="right_arrow"></span>
                        </li>
                        <li>
                            <span class="red_dot"></span>
                            <a href="#" class="black">西裤</a>
                            <span class="right_arrow"></span>
                        </li>
                    </div>
                </div>
                
                <div class="menu-category" onclick="toggleMenu(this)">
                    <div class="title">童装</div>
                    <div class="menu-subitems">
                        <li>
                            <span class="red_dot"></span>
                            <a href="#" class="black">帽子</a>
                            <span class="right_arrow"></span>
                        </li>
                        <li>
                            <span class="red_dot"></span>
                            <a href="#" class="black">马甲</a>
                            <span class="right_arrow"></span>
                        </li>
                    </div>
                </div>
                
                <div class="menu-category" onclick="toggleMenu(this)">
                    <div class="title">运动装</div>
                    <div class="menu-subitems">
                        <li>
                            <span class="red_dot"></span>
                            <a href="#" class="black">冲锋衣</a>
                            <span class="right_arrow"></span>
                        </li>
                        <li>
                            <span class="red_dot"></span>
                            <a href="#" class="black">运动鞋</a>
                            <span class="right_arrow"></span>
                        </li>
                        <li>
                            <span class="red_dot"></span>
                            <a href="#" class="black">运动裤</a>
                            <span class="right_arrow"></span>
                        </li>
                    </div>
                </div>
            </div>
            <div class="middle">
                <h1 class="pic_title">商品详情</h1>
                <div class="left_pic">
                    <div class="magnifier-container" id="mainImageContainer">
                        <img src="images/showdetail/dd1.jpg" width="400px" height="400px" id="showGoodsPicture">
                        <div class="magnifier-lens" id="magnifierLens"></div>
                    </div>
                    <ul class="small_piclist" id="goodsList">
                        <li><img src="images/showdetail/dd1.jpg" onclick="changeGoodsImage(this)"></li>
                        <li><img src="images/showdetail/dd2.jpg" onclick="changeGoodsImage(this)"></li>
                        <li><img src="images/showdetail/dd3.jpg" onclick="changeGoodsImage(this)"></li>
                        <li><img src="images/showdetail/dd4.jpg" onclick="changeGoodsImage(this)"></li>
                        <li><img src="images/showdetail/dd5.jpg" onclick="changeGoodsImage(this)"></li>
                    </ul>
                </div>
                <div class="right_pic">
                    <h1>冬季新款牛仔外套中长款加厚<br>
                        加绒牛仔棉衣女风衣</h1>
                    <img src="images/showdetail/pic_mess.jpg">    
                </div>
                <div class="clear"></div>
                <div>
                    <ul class="tab" id="goodsTabs">
                        <li class="tab_active" onclick="changeGoodsInfo(this)">商品详情</li>
                        <li onclick="changeGoodsInfo(this)">商品评价</li>
                        <li onclick="changeGoodsInfo(this)">成交记录</li>
                    </ul>
                    <!-- 使用语义元素定义商品详情，语义元素是独立代码块 -->
                    <article class="tab_content1">
                        <ul class="particulars">
                            <li>服装版型：修身</li>
                            <li>风格：甜美</li>
                            <li>衣长：中长款</li>
                            <li>袖长：长袖</li>
                            <li>袖型：常规</li>
                            <li>领型：带帽</li>
                            <li>xxxxxx</li>
                        </ul>
                        <section>
                            <div class="magnifier-container">
                                <img src="images/showdetail/detail1.jpg">
                                <div class="magnifier-lens"></div>
                            </div>
                            <div class="magnifier-container">
                                <img src="images/showdetail/detail2.jpg">
                                <div class="magnifier-lens"></div>
                            </div>
                            <div class="magnifier-container">
                                <img src="images/showdetail/detail3.jpg">
                                <div class="magnifier-lens"></div>
                            </div>
                            <div class="magnifier-container">
                                <img src="images/showdetail/detail4.jpg">
                                <div class="magnifier-lens"></div>
                            </div>
                            <div class="magnifier-container">
                                <img src="images/showdetail/detail5.jpg">
                                <div class="magnifier-lens"></div>
                            </div>
                            <div class="magnifier-container">
                                <img src="images/showdetail/detail6.jpg">
                                <div class="magnifier-lens"></div>
                            </div>
                        </section>
                    </article>
                    <!-- 使用语义元素定义商品评价，语义元素是独立代码块 -->
                    <article class="tab_content2 ">
                        <img src="images/showdetail/pinglun.jpg">
                    </article>
                    <!-- 使用语义元素定义成交记录，语义元素是独立代码块 -->
                    <article class="tab_content3 ">
                        <table width="100%" border="0">
                            <thead>
                                <tr>
                                    <th>买家</th>
                                    <th>淘宝价</th>
                                    <th>数量</th>
                                    <th>付款时间</th>
                                    <th>型号和款式</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>杨添锦</td>
                                    <td><em class="prive2">￥198.00</em></td>
                                    <td>1</td>
                                    <td>2025.6.6&nbsp;17：30</td>
                                    <td><p>颜色分类：深蓝【胸前格纹】</p><p>尺码：XL</p></td>
                                </tr>
                                <tr>
                                    <td>杨添锦</td>
                                    <td><em class="prive2">￥1198.00</em></td>
                                    <td>1</td>
                                    <td>2025.6.6&nbsp;17：30</td>
                                    <td><p>颜色分类：深蓝【胸前格纹】</p><p>尺码：XL</p></td>
                                </tr>
                                <tr>
                                    <td>杨添锦</td>
                                    <td><em class="prive2">￥8.00</em></td>
                                    <td>1</td>
                                    <td>2025.6.6&nbsp;17：30</td>
                                    <td><p>颜色分类：深蓝【胸前格纹】</p><p>尺码：XL</p></td>
                                </tr>
                                <tr>
                                    <td>杨添锦</td>
                                    <td><em class="prive2">￥0.98</em></td>
                                    <td>1</td>
                                    <td>2025.6.6&nbsp;17：30</td>
                                    <td><p>颜色分类：深蓝【胸前格纹】</p><p>尺码：XL</p></td>
                                </tr>
                            </tbody>
                        </table>
                    </article>
                </div>
                
            </div>
            <div class="right_nav">
                <h1 class="notice_title">热门推荐</h1><ul class="pic_list3"><li><img src="images/shopshow/s2.jpg" width="80" height="80"/><p class="price2">￥56</p></li><li><img src=images/shopshow/yifu2.jpg width="80" height="80"/><p class="price2">￥56</p></li><li><img src=images/shopshow/s5.jpg width="80" height="80"/><p class="price2">￥56</p></li><li><img src=images/shopshow/s4.jpg width="80" height="80"/><p class="price2">￥56</p></li><li><img src=images/shopshow/s6.jpg width="80" height="80"/><p class="price2">￥56</p></li><li><img src=images/shopshow/s9.jpg width="80" height="80"/><p class="price2">￥56</p></li><li><img src=images/shopshow/yifu4.jpg width="80" height="80"/><p class="price2">￥56</p></li><li><img src=images/shopshow/s3.jpg width="80" height="80"/><p class="price2">￥56</p></li><li><img src=images/shopshow/yifu3.jpg width="80" height="80"/><p class="price2">￥56</p></li></ul>
            </div>
                
        <!-- 内容区end -->

        <div class="clear"></div>
         <!-- 底部区域start -->
        <div class="footer">
            <div class="foot_title">
                <ul class="foot_pic">
                    <li><img src="shop/images/gray1.jpg"></li>
                    <li><img src="shop/images/gray2.jpg"></li>
                    <li><img src="shop/images/gray3.jpg"></li>
                    <li><img src="shop/images/gray4.jpg"></li>
                    <li><img src="shop/images/gray5.jpg"></li>
                </ul>
            </div>
            <ul class="foot_list">
                <li>
                    <div class="floatl">
                        <p class="red_p" style="background: url(shop/images/red1.jpg) no-repeat;"></p>
                        <p class="line1"></p>
                    </div>
                    <ul class="float1">
                        <li class="font16">新手指导</li>
                        <li>用户注册</li>
                        <li>电话下单</li>
                        <li>服务流程</li>
                        <li>服务保障</li>
                        <li>服务协议</li>=
                    </ul>
                </li>
                <li>
                    <div class="floatl">
                        <p class="red_p" ><img src="shop/images/red2.jpg"></p>
                        <p class="line1"></p>
                    </div>
                    <ul class="floatl">
                        <li class="font16">支付方式</li>
                        <li>货到付款</li>
                        <li>商城卡支付</li>
                        <li>支付宝、网银支付</li>
                        <li>优惠券抵用</li>
                    </ul>
                </li>
                <li>
                    <div class="floatl">
                        <p class="red_p" style="background: url(shop/images/red3.jpg) no-repeat;"></p>
                        <p class="line1"></p>
                    </div>
                    <ul class="floatl">
                        <li class="font16">配送方式</li>
                        <li>闪电发货</li>
                        <li>满百包邮</li>
                        <li>配送范围及时间</li>
                        <li>商品验收及签收</li>
                        <li>服务协议</li>
                    </ul>
                </li>
                <li>
                    <div class="floatl">
                        <p class="red_p" ><img src="shop/images/red4.jpg"></p>
                        <p class="line1"></p>
                    </div>
                    <ul class="floatl">
                        <li class="font16">售后服务</li>
                        <li>退换货协议</li>
                        <li>关于发票</li>
                        <li>退换货流程</li>
                        <li>退换货运费</li>
                    </ul>
                </li>
                <li>
                    <div class="floatl">
                        <p class="red_p" style="background: url(shop/images/red5.jpg) no-repeat;"></p>
                        <p class="line1"></p>
                    </div>
                    <ul class="floatl">
                        <li class="font16">关于账号</li>
                        <li>修改个人信息</li>
                        <li>修改密码</li>
                        <li>找回密码</li>
                    </ul>
                </li>
                <li>
                    <div class="floatl">
                        <p class="red_p" style="background: url(shop/images/red6.jpg) no-repeat;"></p>
                        <p class="line1"></p>
                    </div>
                    <ul class="floatl">
                        <li class="font16">优惠活动</li>
                        <li>竞拍须知</li>
                        <li>抢购须知</li>
                    </ul>
                </li>
            </ul>
            <div class="clear"></div>
            <div class="foot_line"></div>
            <p align="center">Copyright 2015-2020 Q-Walking-Fashion E&S 漫步时尚广场（西交）版权所有
                <br>中国陕西西安碑林区8888号 咨询热线12345678912</p>
            <p align="center"><img src="images/foot_pic.jpg"></p>
        </div>
          <!-- 底部区域end -->
          
    <!-- 放大镜视图 -->
    <div class="magnifier-view" id="magnifierView">
        <img id="magnifierImage" src="">
    </div>

    <script type="text/javascript">
        // 放大镜功能
        document.addEventListener('DOMContentLoaded', function() {
            console.log('页面加载完成');
            initMagnifier();
            
            // 初始化菜单状态（默认折叠）
            initMenuState();
            
            // 检查菜单元素是否存在
            const menuControls = document.querySelector('.menu-controls');
            console.log('菜单控制按钮:', menuControls);
            
            const categories = document.querySelectorAll('.menu-category');
            console.log('菜单分类数量:', categories.length);
            
            // 添加键盘事件监听器
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    hideMagnifier();
                }
            });
        });

        function initMagnifier() {
            const containers = document.querySelectorAll('.magnifier-container');
            
            containers.forEach(container => {
                const img = container.querySelector('img');
                const lens = container.querySelector('.magnifier-lens');
                
                if (!img || !lens) return;
                
                // 鼠标进入显示放大镜
                container.addEventListener('mouseenter', function(e) {
                    lens.style.display = 'block';
                    showMagnifier(img, lens, container);
                });
                
                // 鼠标移动更新放大镜
                container.addEventListener('mousemove', function(e) {
                    updateMagnifier(e, img, lens, container);
                });
                
                // 鼠标离开隐藏放大镜
                container.addEventListener('mouseleave', function(e) {
                    lens.style.display = 'none';
                    hideMagnifier();
                });
            });
        }

        function showMagnifier(img, lens, container) {
            const magnifierView = document.getElementById('magnifierView');
            const magnifierImage = document.getElementById('magnifierImage');
            
            // 设置放大镜图片
            magnifierImage.src = img.src;
            magnifierView.style.display = 'block';
        }

        function updateMagnifier(e, img, lens, container) {
            const rect = container.getBoundingClientRect();
            const lensSize = 100;
            const magnifierSize = 200;
            
            // 计算放大镜位置
            let x = e.clientX - rect.left - lensSize/2;
            let y = e.clientY - rect.top - lensSize/2;
            
            // 确保放大镜不会超出图片边界
            const maxX = rect.width - lensSize;
            const maxY = rect.height - lensSize;
            
            x = Math.max(0, Math.min(x, maxX));
            y = Math.max(0, Math.min(y, maxY));
            
            lens.style.left = x + 'px';
            lens.style.top = y + 'px';
            
            // 更新放大镜视图位置
            const magnifierView = document.getElementById('magnifierView');
            const magnifierImage = document.getElementById('magnifierImage');
            
            // 计算放大镜视图位置（在鼠标右侧显示）
            let viewX = e.clientX + 20;
            let viewY = e.clientY - magnifierSize/2;
            
            // 确保放大镜视图不会超出屏幕边界
            const screenWidth = window.innerWidth;
            const screenHeight = window.innerHeight;
            
            if (viewX + magnifierSize > screenWidth) {
                viewX = e.clientX - magnifierSize - 20;
            }
            
            if (viewY < 0) {
                viewY = 10;
            } else if (viewY + magnifierSize > screenHeight) {
                viewY = screenHeight - magnifierSize - 10;
            }
            
            magnifierView.style.left = viewX + 'px';
            magnifierView.style.top = viewY + 'px';
            
            // 计算图片在放大镜中的位置
            const imgRect = img.getBoundingClientRect();
            const scaleX = img.naturalWidth / imgRect.width;
            const scaleY = img.naturalHeight / imgRect.height;
            
            const magnifierX = -(e.clientX - imgRect.left) * scaleX + magnifierSize/2;
            const magnifierY = -(e.clientY - imgRect.top) * scaleY + magnifierSize/2;
            
            magnifierImage.style.left = magnifierX + 'px';
            magnifierImage.style.top = magnifierY + 'px';
        }

        function hideMagnifier() {
            const magnifierView = document.getElementById('magnifierView');
            magnifierView.style.display = 'none';
        }

        // 菜单折叠功能
        function toggleMenu(category) {
            category.classList.toggle('collapsed');
        }
        
        // 全部展开菜单
        function expandAllMenus() {
            const categories = document.querySelectorAll('.menu-category');
            categories.forEach(category => {
                category.classList.remove('collapsed');
            });
        }
        
        // 全部折叠菜单
        function collapseAllMenus() {
            const categories = document.querySelectorAll('.menu-category');
            categories.forEach(category => {
                category.classList.add('collapsed');
            });
        }
        
        // 初始化菜单状态
        function initMenuState() {
            const categories = document.querySelectorAll('.menu-category');
            console.log('找到菜单分类数量:', categories.length);
            categories.forEach(category => {
                category.classList.add('collapsed');
                console.log('已折叠分类:', category.querySelector('.title').textContent);
            });
        }

        // 原有的图片切换功能
        function changeGoodsImage(imgElement) {
            const mainImage = document.getElementById('showGoodsPicture');
            mainImage.src = imgElement.src;
        }

        function changeGoodsInfo(tabElement) {
            // 移除所有活动状态
            const tabs = document.querySelectorAll('#goodsTabs li');
            tabs.forEach(tab => tab.classList.remove('tab_active'));
            
            // 添加活动状态到当前标签
            tabElement.classList.add('tab_active');
            
            // 隐藏所有内容
            const contents = document.querySelectorAll('article[class^="tab_content"]');
            contents.forEach(content => content.style.display = 'none');
            
            // 显示对应内容
            const tabIndex = Array.from(tabs).indexOf(tabElement);
            const targetContent = document.querySelector('.tab_content' + (tabIndex + 1));
            if (targetContent) {
                targetContent.style.display = 'block';
            }
        }
    </script>
</body>
</html>